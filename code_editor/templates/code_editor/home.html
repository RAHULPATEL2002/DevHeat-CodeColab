{% extends 'base.html' %}

{% block content %}
<div class="welcome-section">
    {% if user.is_authenticated %}
        <h1>Welcome to Code Editor</h1>
        <p class="lead">Start collaborating with others by creating or joining a room.</p>
        <div class="mt-4">
            <a href="{% url 'create_room' %}" class="btn btn-primary me-2">Create Room</a>
            <a href="{% url 'join_room' %}" class="btn btn-secondary">Join Room</a>
        </div>

        <hr>
        {% comment %} recommendations {% endcomment %}
        <div class="mt-5">
            <h3>Find Rooms Based on Your Interests</h3>
            <button id="recommend-btn" class="btn btn-info mt-2">Get Recommended Rooms</button>
        </div>

        <div id="recommended-section" class="mt-4" style="display: none;">
            <h4>Recommended Rooms</h4>
            <ul id="recommended-rooms" class="list-group mt-2">
                {% if recommended_rooms %}
                    {% for room in recommended_rooms %}
                        <li class="list-group-item">
                            <strong>{{ room.name }}</strong> - Created by {{ room.creator.username }}
                        </li>
                    {% empty %}
                        <li class="list-group-item text-muted">No recommendations found based on your interests.</li>
                    {% endfor %}
                {% else %}
                    <li class="list-group-item text-muted">No recommendations available. Try updating your interests.</li>
                {% endif %}
            </ul>
        </div>

    {% else %}
        <h1>Welcome to Code Editor</h1>
        <p class="lead">Please login or register to start coding collaboratively.</p>
        <div class="mt-4">
            <a href="{% url 'login' %}" class="btn btn-primary me-2">Login</a>
            <a href="{% url 'register' %}" class="btn btn-secondary">Register</a>
        </div>
    {% endif %}
</div>

<script>
    document.getElementById("recommend-btn").addEventListener("click", function() {
        document.getElementById("recommended-section").style.display = "block";
    });
</script>
{% endblock %}